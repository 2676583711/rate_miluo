{"version":3,"sources":["../../src/pages/site-list/site-list.module.ts","../../src/pages/base/base.ts","../../src/pages/site-list/site-list.ts"],"names":[],"mappings":"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","file":"13.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SiteListPage } from './site-list';\n\n@NgModule({\n  declarations: [\n    SiteListPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SiteListPage),\n  ],\n})\nexport class SiteListPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/site-list/site-list.module.ts","import { NavController, NavParams, ToastController } from 'ionic-angular';\n\n/**\n * Generated class for the BasePage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n\nexport class BasePage {\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public toastCtrl?: ToastController) {\n  }\n\n  toast(info) {\n    if (this.toastCtrl != null)\n      this.toastCtrl.create({\n        message: info,\n        duration: 3000,\n        position: 'middle',\n        showCloseButton: true,\n        closeButtonText: \"关闭\"\n      }).present();\n  }\n\n  toastLong(info) {\n    if (this.toastCtrl != null)\n      this.toastCtrl.create({\n        message: info,\n        duration: 3000,\n        position: 'middle',\n        showCloseButton: true,\n        closeButtonText: \"关闭\"\n      }).present();\n  }\n\n  toastShort(info) {\n    if (this.toastCtrl != null)\n      this.toastCtrl.create({\n        message: info,\n        duration: 1500,\n        position: 'middle',\n        showCloseButton: true,\n        closeButtonText: \"关闭\"\n      }).present();\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/base/base.ts","import { AppServiceProvider, AppGlobal } from './../../providers/app-service/app-service';\nimport { NetworkServiceProvider } from './../../providers/network-service/network-service';\nimport { BasePage } from './../base/base';\nimport { Component, ViewChildren, ChangeDetectorRef, ViewChild } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Content, ToastController } from 'ionic-angular';\n\n/**\n * Generated class for the SiteListPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\ndeclare const $;\n\n@IonicPage()\n@Component({\n  selector: 'page-site-list',\n  templateUrl: 'site-list.html',\n})\nexport class SiteListPage extends BasePage {\n  @ViewChild('siteListContent') siteListContent: Content;\n  @ViewChildren('ionItemGroup1') ionItemGroup1;\n  index: string = 'A';\n  /*字母的初始化*/\n  aLetters = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];\n  offsetTops: Array<number> = [];//每段字母距离顶部的距离;\n  newArr: Array<any> = [];//通过接口获取数据中含有字母与26个字母的对比后公式的字母\n  arr1: Array<any> = []\n  isShow: boolean = false;\n  siteList = new Map();//初始值\n  site = new Map();//查询后的值 \n  href: any;\n  searchText: any;//查询条件\n  siteHeight: any;\n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n    public toastCtrl: ToastController,\n    public ref: ChangeDetectorRef,\n    public net: NetworkServiceProvider) {\n    super(navCtrl, navParams, toastCtrl);\n\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad SiteListPage');\n    this.getOffsetTops();\n    this.onScroll();\n    this.getSiteList()\n  }\n  searchChange(e) {\n    var value = e.data;\n    // console.log(\"eeeeeeee\")\n    // console.log(value);\n    this.arr1 = []\n    this.site = new Map();//查询后的值 \n    for (const key in this.siteList) {\n      var arr = new Array();\n      for (var i = 0; i < this.siteList[key].length; i++) {\n        if (this.siteList[key][i].name.indexOf(value) != -1) {\n          console.log(i + '.' + this.siteList[key][i].name)\n          arr.push(this.siteList[key][i]);\n        }\n      }\n      if (arr.length > 0) {\n        this.arr1.push(key);\n        this.site[key] = arr;\n      }\n    }\n    this.siteHeights();\n  }\n  selectIndex(item) {\n    this.index = item;\n    this.href = \"#\" + item;\n    this.isShow = true;\n    console.log(\"selectIndex\")\n    console.log(document.getElementById(item))\n    if (this.arr1.join('').indexOf(item) != -1) {\n      let element = document.getElementById(item);\n      if (element) {\n        element.scrollIntoView();\n      }\n    }\n\n    setTimeout(() => {\n      this.isShow = false;\n    }, 500)\n  }\n  airDetails(site) {\n    if (site.siteType == '2') {\n      this.navCtrl.push('AirDetailsPage', { site: site, id: 'a' });\n    } else if (site.siteType == '1') {\n      this.navCtrl.push('AutomaticDetailsPage', { site: site, id: 'a' });\n    } else if (site.siteType == '3') {\n      this.navCtrl.push('ContaminatedDetailsPage', { site: site, id: 'a' });\n    } else if (site.siteType == '4') {\n      this.navCtrl.push('HandleDetailsPage', { site: site, id: 'a' });\n    }\n  }\n\n  //每个字母距离部的距离\n  getOffsetTops() {\n    this.offsetTops = this.ionItemGroup1._results.map(ele => {\n      return ele.nativeElement.offsetTop;\n    })\n    console.log(\"-----------------\")\n    console.log(this.offsetTops)\n    this.index = this.aLetters[0];\n  }\n  siteHeights() {\n    let siteListContent = $(\"#siteListContent\").height();\n    let header = $(\"#header\").height();\n    this.siteHeight = siteListContent - header + 'px';\n    console.log(\"siteListContent:\" + siteListContent)\n    console.log(\"siteHeight:\" + this.siteHeight)\n\n  }\n  onScroll() {\n    const threshold = 42;//标题的高度\n    if (this.siteListContent.scrollTop < threshold) {\n      this.index = this.aLetters[0];\n      this.ref.detectChanges();//手动监测变化\n      console.log(\"aaaaaaaaaaa:\" + this.index)\n      console.log(this.ref.detectChanges())\n      console.log(this.siteListContent)\n      return;\n    }\n\n    for (let i = this.offsetTops.length; i > 0; i--) {\n      if (this.siteListContent.scrollTop + threshold >= this.offsetTops[i]) {\n        this.index = this.aLetters[i];\n        this.ref.detectChanges()\n        console.log(\"bbbbbbbb:\" + this.index)\n        console.log(this.ref.detectChanges())\n        console.log(this.siteListContent)\n        return;\n      }\n    }\n\n\n  }\n  getSiteList() {\n    let params: any = {};\n    params.userId = AppServiceProvider.getInstance().userInfo.userId;\n    params.code = AppServiceProvider.getInstance().userInfo.code;\n    this.net.httpPost(\n      AppGlobal.API.getSiteList, params, res => {\n        this.siteList = res;\n        for (const key in this.siteList) {\n          this.arr1.push(key);\n        }\n        this.site = this.siteList;\n        this.siteHeights()\n      }, error => {\n        this.toast(error);\n      }\n    )\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/site-list/site-list.ts"],"sourceRoot":""}